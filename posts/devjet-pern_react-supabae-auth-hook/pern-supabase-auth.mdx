---
title: ""
date: 
summary: ""
tags: []
category: ""
image: ""
pro: 
---



1. Install dependencies

```
yarn add @supabase/supabase-js
```

2. Create your supabase application and copy your credentials to `client/.env`. Remember to update `.env.example` with your new enviroment variable

``` client/.env
# ...
REACT_APP_SUPABASE_URL= # your api key value
REACT_APP_SUPABASE_API_KEY= # your api key value
```

``` client/.env.example
# ...
REACT_APP_SUPABASE_URL= # empty, just for reference
REACT_APP_SUPABASE_API_KEY= # empty, just for reference
```


3. Create supabase client in `client/src/utils/supabase.ts`

```ts
import { createClient } from "@supabase/supabase-js";

export const supabase = createClient(
  process.env.REACT_APP_SUPABASE_URL as string,
  process.env.REACT_APP_SUPABASE_API_KEY as string
);
```

4. Create an authentication context hook

```ts
import React, { useContext, useState, useEffect, createContext } from 'react';
import { supabase } from '../supabase';

// create a context for authentication
const AuthContext = createContext();

export const AuthProvider = ({ children }) => {
  // create state values for user data and loading
  const [user, setUser] = useState();
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // get session data if there is an active session
    const session = supabase.auth.session();

    setUser(session?.user ?? null);
    setLoading(false);

    // listen for changes to auth
    const { data: listener } = supabase.auth.onAuthStateChange(
      (event, session) => {
        setUser(session?.user ?? null);
        setLoading(false);
      }
    );

    // cleanup the useEffect hook
    return () => {
      listener?.unsubscribe();
    };
  }, []);

  // create signUp, signIn, signOut functions
  const value = {
    signUp: data => supabase.auth.signUp(data),
    signIn: data => supabase.auth.signIn(data),
    signOut: () => supabase.auth.signOut(),
    user,
  };

  // use a provider to pass down the value
  return (
    <AuthContext.Provider value={value}>
      {!loading && children}
    </AuthContext.Provider>
  );
};

// export the useAuth hook
export const useAuth = () => {
  return useContext(AuthContext);
};
```

5. Add your context provider to `client/src/index.ts`

```ts client/src/index.ts {11,21,25}
import React from "react";
import ReactDOM from "react-dom/client";
import "styles/index.css";
import App from "App";
import reportWebVitals from "reportWebVitals";
import { BrowserRouter } from "react-router-dom";
import { store } from "redux/store";
import { Provider } from "react-redux";
import { ChakraProvider } from "@chakra-ui/react";
import chakraTheme from "utils/chakraTheme";
import { AuthProvider } from "utils/authHook";

const root = ReactDOM.createRoot(
  document.getElementById("root") as HTMLElement
);

root.render(
  <React.StrictMode>
    <BrowserRouter>
      <Provider store={store}>
        <AuthProvider>
          <ChakraProvider theme={chakraTheme}>
            <App />
          </ChakraProvider>
        </AuthProvider>
      </Provider>
    </BrowserRouter>
  </React.StrictMode>
);

// If you want to start measuring performance in your app, pass a function
// to log results (for example: reportWebVitals(console.log))
// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals
reportWebVitals();
```